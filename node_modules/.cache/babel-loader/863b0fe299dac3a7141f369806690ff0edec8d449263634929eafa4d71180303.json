{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zoe/Desktop/Independent/timer/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zoe/Desktop/Independent/timer/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zoe/Desktop/Independent/timer/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Bar}from\"react-chartjs-2\";import{getWeek,startOfWeek}from\"date-fns\";import{utcToZonedTime,zonedTimeToUtc}from\"date-fns-tz\";import{jsx as _jsx}from\"react/jsx-runtime\";var WeeklyBarChart=function WeeklyBarChart(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),weekData=_useState2[0],setWeekData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var storedEmail,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:storedEmail=localStorage.getItem(\"email\");if(storedEmail){_context.next=4;break;}console.error(\"Email not found in local storage\");return _context.abrupt(\"return\");case 4:setEmail(storedEmail);_context.next=7;return axios.post(\"https://www.zoelindev.com/timer/API/bar.php\",{email:storedEmail});case 7:result=_context.sent;setWeekData(result.data.weekData);case 9:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var weekDataLabels=[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"];var timeZone=Intl.DateTimeFormat().resolvedOptions().timeZone;var currentDate=new Date();var zonedDate=utcToZonedTime(currentDate,timeZone);var currentWeek=getWeek(zonedDate);var weekStartDate=startOfWeek(zonedDate);var weekDataValues=Array.from(Array(7),function(_,i){var date=new Date(weekStartDate);date.setDate(date.getDate()+i);var formattedDate=date.toISOString().split(\"T\")[0];return parseFloat((weekData[formattedDate]||0)/60).toFixed(1);// turn seconds to mins\n});var weekChartData={labels:weekDataLabels,datasets:[{label:\"null\",data:weekDataValues,backgroundColor:[\"rgba(255, 99, 132, 0.2)\",\"rgba(255, 159, 64, 0.2)\",\"rgba(255, 205, 86, 0.2)\",\"rgba(75, 192, 192, 0.2)\",\"rgba(54, 162, 235, 0.2)\",\"rgba(153, 102, 255, 0.2)\",\"rgba(201, 203, 207, 0.2)\"],borderColor:[\"rgb(255, 99, 132)\",\"rgb(255, 159, 64)\",\"rgb(255, 205, 86)\",\"rgb(75, 192, 192)\",\"rgb(54, 162, 235)\",\"rgb(153, 102, 255)\",\"rgb(201, 203, 207)\"],borderWidth:1}]};var weekChartOptions={legend:{display:false}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Bar,{data:weekChartData,options:weekChartOptions})});};export default WeeklyBarChart;","map":{"version":3,"names":["React","useState","useEffect","axios","Bar","getWeek","startOfWeek","utcToZonedTime","zonedTimeToUtc","jsx","_jsx","WeeklyBarChart","_useState","_useState2","_slicedToArray","weekData","setWeekData","_useState3","_useState4","email","setEmail","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","storedEmail","result","wrap","_callee$","_context","prev","next","localStorage","getItem","console","error","abrupt","post","sent","data","stop","apply","arguments","weekDataLabels","timeZone","Intl","DateTimeFormat","resolvedOptions","currentDate","Date","zonedDate","currentWeek","weekStartDate","weekDataValues","Array","from","_","i","date","setDate","getDate","formattedDate","toISOString","split","parseFloat","toFixed","weekChartData","labels","datasets","label","backgroundColor","borderColor","borderWidth","weekChartOptions","legend","display","children","options"],"sources":["/Users/zoe/Desktop/Independent/timer/my-app/src/components/WeeklyBarChart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Bar } from \"react-chartjs-2\";\nimport { getWeek, startOfWeek } from \"date-fns\";\nimport { utcToZonedTime, zonedTimeToUtc } from \"date-fns-tz\";\n\n\nconst WeeklyBarChart = () => {\n  const [weekData, setWeekData] = useState({});\n  const [email, setEmail] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const storedEmail = localStorage.getItem(\"email\");\n      if (!storedEmail) {\n        console.error(\"Email not found in local storage\");\n        return;\n      }\n\n      setEmail(storedEmail);\n\n      const result = await axios.post(\n        \"https://www.zoelindev.com/timer/API/bar.php\",\n        {\n          email: storedEmail,\n        }\n      );\n      setWeekData(result.data.weekData);\n    };\n\n    fetchData();\n  }, []);\n\n  const weekDataLabels = [\n    \"S\",\n    \"M\",\n    \"T\",\n    \"W\",\n    \"T\",\n    \"F\",\n    \"S\",\n  ];\n\n  const timeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  const currentDate = new Date();\n  const zonedDate = utcToZonedTime(currentDate, timeZone);\n  const currentWeek = getWeek(zonedDate);\n  const weekStartDate = startOfWeek(zonedDate);\n\n\n  const weekDataValues = Array.from(Array(7), (_, i) => {\n    const date = new Date(weekStartDate);\n    date.setDate(date.getDate() + i);\n    const formattedDate = date.toISOString().split(\"T\")[0];\n    return parseFloat((weekData[formattedDate] || 0) / 60).toFixed(1); // turn seconds to mins\n  });\n  \n\n  const weekChartData = {\n    labels: weekDataLabels,\n    datasets: [\n      {\n        label: \"null\",\n        data: weekDataValues,\n        backgroundColor: [\n          \"rgba(255, 99, 132, 0.2)\",\n          \"rgba(255, 159, 64, 0.2)\",\n          \"rgba(255, 205, 86, 0.2)\",\n          \"rgba(75, 192, 192, 0.2)\",\n          \"rgba(54, 162, 235, 0.2)\",\n          \"rgba(153, 102, 255, 0.2)\",\n          \"rgba(201, 203, 207, 0.2)\",\n        ],\n        borderColor: [\n          \"rgb(255, 99, 132)\",\n          \"rgb(255, 159, 64)\",\n          \"rgb(255, 205, 86)\",\n          \"rgb(75, 192, 192)\",\n          \"rgb(54, 162, 235)\",\n          \"rgb(153, 102, 255)\",\n          \"rgb(201, 203, 207)\",\n        ],\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const weekChartOptions = {\n    legend: {\n      display: false,\n    },\n    \n  };\n\n  return (\n      <div>\n        <Bar data={weekChartData} options={weekChartOptions}/>\n      </div>\n    \n  );\n};\n\nexport default WeeklyBarChart;\n"],"mappings":"mZAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,GAAG,KAAQ,iBAAiB,CACrC,OAASC,OAAO,CAAEC,WAAW,KAAQ,UAAU,CAC/C,OAASC,cAAc,CAAEC,cAAc,KAAQ,aAAa,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAG7D,GAAM,CAAAC,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3B,IAAAC,SAAA,CAAgCX,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAY,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAC5B,IAAAI,UAAA,CAA0BhB,QAAQ,CAAC,EAAE,CAAC,CAAAiB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA/BE,KAAK,CAAAD,UAAA,IAAEE,QAAQ,CAAAF,UAAA,IAEtBhB,SAAS,CAAC,UAAM,CACd,GAAM,CAAAmB,SAAS,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,WAAA,CAAAC,MAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACVN,WAAW,CAAGO,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAC5CR,WAAW,EAAAI,QAAA,CAAAE,IAAA,UACdG,OAAO,CAACC,KAAK,CAAC,kCAAkC,CAAC,CAAC,OAAAN,QAAA,CAAAO,MAAA,kBAIpDlB,QAAQ,CAACO,WAAW,CAAC,CAACI,QAAA,CAAAE,IAAA,SAED,CAAA9B,KAAK,CAACoC,IAAI,CAC7B,6CAA6C,CAC7C,CACEpB,KAAK,CAAEQ,WACT,CAAC,CACF,QALKC,MAAM,CAAAG,QAAA,CAAAS,IAAA,CAMZxB,WAAW,CAACY,MAAM,CAACa,IAAI,CAAC1B,QAAQ,CAAC,CAAC,wBAAAgB,QAAA,CAAAW,IAAA,MAAAhB,OAAA,GACnC,kBAhBK,CAAAL,SAASA,CAAA,SAAAC,IAAA,CAAAqB,KAAA,MAAAC,SAAA,OAgBd,CAEDvB,SAAS,EAAE,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAwB,cAAc,CAAG,CACrB,GAAG,CACH,GAAG,CACH,GAAG,CACH,GAAG,CACH,GAAG,CACH,GAAG,CACH,GAAG,CACJ,CAED,GAAM,CAAAC,QAAQ,CAAGC,IAAI,CAACC,cAAc,EAAE,CAACC,eAAe,EAAE,CAACH,QAAQ,CACjE,GAAM,CAAAI,WAAW,CAAG,GAAI,CAAAC,IAAI,EAAE,CAC9B,GAAM,CAAAC,SAAS,CAAG7C,cAAc,CAAC2C,WAAW,CAAEJ,QAAQ,CAAC,CACvD,GAAM,CAAAO,WAAW,CAAGhD,OAAO,CAAC+C,SAAS,CAAC,CACtC,GAAM,CAAAE,aAAa,CAAGhD,WAAW,CAAC8C,SAAS,CAAC,CAG5C,GAAM,CAAAG,cAAc,CAAGC,KAAK,CAACC,IAAI,CAACD,KAAK,CAAC,CAAC,CAAC,CAAE,SAACE,CAAC,CAAEC,CAAC,CAAK,CACpD,GAAM,CAAAC,IAAI,CAAG,GAAI,CAAAT,IAAI,CAACG,aAAa,CAAC,CACpCM,IAAI,CAACC,OAAO,CAACD,IAAI,CAACE,OAAO,EAAE,CAAGH,CAAC,CAAC,CAChC,GAAM,CAAAI,aAAa,CAAGH,IAAI,CAACI,WAAW,EAAE,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CACtD,MAAO,CAAAC,UAAU,CAAC,CAACnD,QAAQ,CAACgD,aAAa,CAAC,EAAI,CAAC,EAAI,EAAE,CAAC,CAACI,OAAO,CAAC,CAAC,CAAC,CAAE;AACrE,CAAC,CAAC,CAGF,GAAM,CAAAC,aAAa,CAAG,CACpBC,MAAM,CAAExB,cAAc,CACtByB,QAAQ,CAAE,CACR,CACEC,KAAK,CAAE,MAAM,CACb9B,IAAI,CAAEc,cAAc,CACpBiB,eAAe,CAAE,CACf,yBAAyB,CACzB,yBAAyB,CACzB,yBAAyB,CACzB,yBAAyB,CACzB,yBAAyB,CACzB,0BAA0B,CAC1B,0BAA0B,CAC3B,CACDC,WAAW,CAAE,CACX,mBAAmB,CACnB,mBAAmB,CACnB,mBAAmB,CACnB,mBAAmB,CACnB,mBAAmB,CACnB,oBAAoB,CACpB,oBAAoB,CACrB,CACDC,WAAW,CAAE,CACf,CAAC,CAEL,CAAC,CAED,GAAM,CAAAC,gBAAgB,CAAG,CACvBC,MAAM,CAAE,CACNC,OAAO,CAAE,KACX,CAEF,CAAC,CAED,mBACInE,IAAA,QAAAoE,QAAA,cACEpE,IAAA,CAACN,GAAG,EAACqC,IAAI,CAAE2B,aAAc,CAACW,OAAO,CAAEJ,gBAAiB,EAAE,EAClD,CAGZ,CAAC,CAED,cAAe,CAAAhE,cAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}