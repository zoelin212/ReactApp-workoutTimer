{"ast":null,"code":"import _regeneratorRuntime from\"/Users/zoe/Desktop/Independent/timer/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/zoe/Desktop/Independent/timer/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/zoe/Desktop/Independent/timer/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{Bar}from\"react-chartjs-2\";import{startOfMonth,endOfMonth,getDaysInMonth}from\"date-fns\";import{jsx as _jsx}from\"react/jsx-runtime\";var MonthlyBarChart=function MonthlyBarChart(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),monthData=_useState2[0],setMonthData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var storedEmail,result;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:storedEmail=localStorage.getItem(\"email\");if(storedEmail){_context.next=4;break;}console.error(\"Email not found in local storage\");return _context.abrupt(\"return\");case 4:setEmail(storedEmail);_context.next=7;return axios.post(\"https://www.zoelindev.com/timer/API/bar.php\",{email:storedEmail});case 7:result=_context.sent;setMonthData(result.data.monthData);case 9:case\"end\":return _context.stop();}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var monthDataLabels=Array.from(Array(getDaysInMonth(new Date())),function(_,i){return(i+1).toString();});var monthDataValues=Array.from(Array(getDaysInMonth(new Date())),function(_,i){var date=new Date();date.setDate(i+1);var formattedDate=date.toISOString().split(\"T\")[0];var seconds=monthData[formattedDate]||0;return Math.floor(seconds/60);// turn seconds to mins\n});var monthChartData={labels:monthDataLabels,datasets:[{label:\"\",data:monthDataValues,backgroundColor:monthDataValues.map(function(_,i){return\"rgba(\".concat(Math.floor(Math.random()*256),\", \").concat(Math.floor(Math.random()*256),\", \").concat(Math.floor(Math.random()*256),\", 0.2)\");}),borderColor:monthDataValues.map(function(_,i){return\"rgb(\".concat(Math.floor(Math.random()*256),\", \").concat(Math.floor(Math.random()*256),\", \").concat(Math.floor(Math.random()*256),\")\");}),borderWidth:1}]};var monthChartOptions={legend:{display:false}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Bar,{data:monthChartData,options:monthChartOptions})});};export default MonthlyBarChart;","map":{"version":3,"names":["React","useState","useEffect","axios","Bar","startOfMonth","endOfMonth","getDaysInMonth","jsx","_jsx","MonthlyBarChart","_useState","_useState2","_slicedToArray","monthData","setMonthData","_useState3","_useState4","email","setEmail","fetchData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","storedEmail","result","wrap","_callee$","_context","prev","next","localStorage","getItem","console","error","abrupt","post","sent","data","stop","apply","arguments","monthDataLabels","Array","from","Date","_","i","toString","monthDataValues","date","setDate","formattedDate","toISOString","split","seconds","Math","floor","monthChartData","labels","datasets","label","backgroundColor","map","concat","random","borderColor","borderWidth","monthChartOptions","legend","display","children","options"],"sources":["/Users/zoe/Desktop/Independent/timer/my-app/src/components/MonthlyBarChart.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Bar } from \"react-chartjs-2\";\nimport { startOfMonth, endOfMonth, getDaysInMonth } from \"date-fns\";\n\nconst MonthlyBarChart = () => {\n  const [monthData, setMonthData] = useState({});\n  const [email, setEmail] = useState(\"\");\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const storedEmail = localStorage.getItem(\"email\");\n      if (!storedEmail) {\n        console.error(\"Email not found in local storage\");\n        return;\n      }\n\n      setEmail(storedEmail);\n\n      const result = await axios.post(\n        \"https://www.zoelindev.com/timer/API/bar.php\",\n        {\n          email: storedEmail,\n        }\n      );\n      setMonthData(result.data.monthData);\n    };\n\n    fetchData();\n  }, []);\n\n  const monthDataLabels = Array.from(Array(getDaysInMonth(new Date())), (_, i) =>\n    (i + 1).toString()\n  );\n  const monthDataValues = Array.from(Array(getDaysInMonth(new Date())), (_, i) => {\n    const date = new Date();\n    date.setDate(i + 1);\n    const formattedDate = date.toISOString().split(\"T\")[0];\n    const seconds = monthData[formattedDate] || 0;\n    return Math.floor(seconds / 60); // turn seconds to mins\n  });\n\n  const monthChartData = {\n    labels: monthDataLabels,\n    datasets: [\n      {\n        label: \"\",\n        data: monthDataValues,\n        backgroundColor: monthDataValues.map((_, i) =>\n          `rgba(${Math.floor(Math.random() * 256)}, ${Math.floor(\n            Math.random() * 256\n          )}, ${Math.floor(Math.random() * 256)}, 0.2)`\n        ),\n        borderColor: monthDataValues.map((_, i) =>\n          `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(\n            Math.random() * 256\n          )}, ${Math.floor(Math.random() * 256)})`\n        ),\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const monthChartOptions = {\n    legend: {\n      display: false,\n    },\n    \n  };\n\n  return (\n    <div>\n      <Bar data={monthChartData} options={monthChartOptions}/>\n    </div>\n  );\n};\n\nexport default MonthlyBarChart;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}